[common]
firmware_version = "2.0"

[platformio]
extra_configs = private.ini
default_envs = esp32-debug

[env]
framework = arduino
monitor_speed = 115200
monitor_echo = yes
board_build.filesystem = littlefs
lib_ignore = AsyncTCP
lib_deps =
    ..\@libs\arduino\ArduinoJson
	..\@libs\arduino\I2CScanner
	..\@libs\arduino\DFRobot_AHT20
	..\@libs\arduino\DFRobot_BMP280

[env:esp32-release]
platform = espressif32
board = esp32dev
upload_port = ${private.comm_port}
monitor_port = ${private.comm_port}
build_flags =
    -D RELEASE
    -D LED_BUILTIN=2
    -D SERIAL_SPEED=${env.monitor_speed}
    -D FIRMWARE_VERSION='${common.firmware_version}'

[env:esp32-debug]
extends = env:esp32-release
build_type = debug
build_unflags = -D RELEASE
build_flags =
    -D DEBUG
    ; -D CONFIG_UTILS_JSON_TRACE
    ${env:esp32-release.build_flags}
